<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hooks | Volta</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.gPDest4C.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.sNxdEc7w.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CFVlit9Z.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BQmytedh.js">
    <link rel="modulepreload" href="/assets/reference_advanced_hooks.md.fEW-ADJz.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-16e90887><!--[--><!--]--><!--[--><span tabindex="-1" data-v-5cd2e486></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-5cd2e486> Skip to content </a><!--]--><!----><header class="VPNav" data-v-16e90887 data-v-09dc9f16><div class="VPNavBar" data-v-09dc9f16 data-v-b9bdde80><div class="wrapper" data-v-b9bdde80><div class="container" data-v-b9bdde80><div class="title" data-v-b9bdde80><div class="VPNavBarTitle has-sidebar" data-v-b9bdde80 data-v-f4d2fde3><a class="title" href="/" data-v-f4d2fde3><!--[--><!--]--><!----><span data-v-f4d2fde3>Volta</span><!--[--><!--]--></a></div></div><div class="content" data-v-b9bdde80><div class="content-body" data-v-b9bdde80><!--[--><!--]--><div class="VPNavBarSearch search" data-v-b9bdde80><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-b9bdde80 data-v-f357e9e3><span id="main-nav-aria-label" class="visually-hidden" data-v-f357e9e3> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-f357e9e3 data-v-96bd70fd><!--[--><span data-v-96bd70fd>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/introduction.html" tabindex="0" data-v-f357e9e3 data-v-96bd70fd><!--[--><span data-v-96bd70fd>指南</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/reference/index.html" tabindex="0" data-v-f357e9e3 data-v-96bd70fd><!--[--><span data-v-96bd70fd>参考</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://volta.sh/" target="_blank" rel="noreferrer" tabindex="0" data-v-f357e9e3 data-v-96bd70fd><!--[--><span data-v-96bd70fd>官方网站</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-b9bdde80 data-v-b540e448><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-b540e448 data-v-13b0db4a data-v-2cda84ab><span class="check" data-v-2cda84ab><span class="icon" data-v-2cda84ab><!--[--><span class="vpi-sun sun" data-v-13b0db4a></span><span class="vpi-moon moon" data-v-13b0db4a></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-b9bdde80 data-v-476cc7f8 data-v-6162005f><!--[--><a class="VPSocialLink no-icon" href="https://github.com/document-translate/volta" aria-label="github" target="_blank" rel="noopener" data-v-6162005f data-v-98d619ff><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-b9bdde80 data-v-31c5c69b data-v-51be4e17><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-51be4e17><span class="vpi-more-horizontal icon" data-v-51be4e17></span></button><div class="menu" data-v-51be4e17><div class="VPMenu" data-v-51be4e17 data-v-d4df23b3><!----><!--[--><!--[--><!----><div class="group" data-v-31c5c69b><div class="item appearance" data-v-31c5c69b><p class="label" data-v-31c5c69b>Appearance</p><div class="appearance-action" data-v-31c5c69b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-31c5c69b data-v-13b0db4a data-v-2cda84ab><span class="check" data-v-2cda84ab><span class="icon" data-v-2cda84ab><!--[--><span class="vpi-sun sun" data-v-13b0db4a></span><span class="vpi-moon moon" data-v-13b0db4a></span><!--]--></span></span></button></div></div></div><div class="group" data-v-31c5c69b><div class="item social-links" data-v-31c5c69b><div class="VPSocialLinks social-links-list" data-v-31c5c69b data-v-6162005f><!--[--><a class="VPSocialLink no-icon" href="https://github.com/document-translate/volta" aria-label="github" target="_blank" rel="noopener" data-v-6162005f data-v-98d619ff><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-b9bdde80 data-v-ca4fa806><span class="container" data-v-ca4fa806><span class="top" data-v-ca4fa806></span><span class="middle" data-v-ca4fa806></span><span class="bottom" data-v-ca4fa806></span></span></button></div></div></div></div><div class="divider" data-v-b9bdde80><div class="divider-line" data-v-b9bdde80></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-16e90887 data-v-ade5eaa4><div class="container" data-v-ade5eaa4><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-ade5eaa4><span class="vpi-align-left menu-icon" data-v-ade5eaa4></span><span class="menu-text" data-v-ade5eaa4>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-ade5eaa4 data-v-867abfdc><button data-v-867abfdc>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-16e90887 data-v-dc9e5330><div class="curtain" data-v-dc9e5330></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-dc9e5330><span class="visually-hidden" id="sidebar-aria-label" data-v-dc9e5330> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-94966ea5><section class="VPSidebarItem level-0" data-v-94966ea5 data-v-54d18ea5><div class="item" role="button" tabindex="0" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><h2 class="text" data-v-54d18ea5>参考</h2><!----></div><div class="items" data-v-54d18ea5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/index.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta 命令</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/fetch.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta fetch</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/install.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta install</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/uninstall.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta uninstall</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/pin.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta pin</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/list.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta list</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/completions.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta completions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/which.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta which</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/setup.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta setup</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/run.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta run</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/help.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>volta help</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-94966ea5><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-94966ea5 data-v-54d18ea5><div class="item" role="button" tabindex="0" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><h2 class="text" data-v-54d18ea5>高级的</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-54d18ea5><span class="vpi-chevron-right caret-icon" data-v-54d18ea5></span></div></div><div class="items" data-v-54d18ea5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/advanced/hooks.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>Hooks</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/advanced/packages.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>Packages Binaries</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/advanced/installers.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>安装程序</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/advanced/workspaces.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>工作区 Workspace</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/advanced/uninstall.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>卸载 Volta</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54d18ea5 data-v-54d18ea5><div class="item" data-v-54d18ea5><div class="indicator" data-v-54d18ea5></div><a class="VPLink link link" href="/reference/advanced/pnpm.html" data-v-54d18ea5><!--[--><p class="text" data-v-54d18ea5>pnpm 支持</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-16e90887 data-v-b7d62191><div class="VPDoc has-sidebar has-aside" data-v-b7d62191 data-v-f58f624c><!--[--><!--]--><div class="container" data-v-f58f624c><div class="aside" data-v-f58f624c><div class="aside-curtain" data-v-f58f624c></div><div class="aside-container" data-v-f58f624c><div class="aside-content" data-v-f58f624c><div class="VPDocAside" data-v-f58f624c data-v-4ea2ec07><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-4ea2ec07 data-v-d85a81ed><div class="content" data-v-d85a81ed><div class="outline-marker" data-v-d85a81ed></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-d85a81ed>章节目录</div><ul class="VPDocOutlineItem root" data-v-d85a81ed data-v-3ed8b361><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-4ea2ec07></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f58f624c><div class="content-container" data-v-f58f624c><!--[--><!--]--><main class="main" data-v-f58f624c><div style="position:relative;" class="vp-doc _reference_advanced_hooks" data-v-f58f624c><div><h1 id="hooks" tabindex="-1">Hooks <a class="header-anchor" href="#hooks" aria-label="Permalink to &quot;Hooks&quot;">​</a></h1><p>默认情况下，Volta 从公共资源和注册表(<a href="https://nodejs.org" target="_blank" rel="noreferrer">https://nodejs.org</a>, <a href="https://yarnpkg.com" target="_blank" rel="noreferrer">https://yarnpkg.com</a>, <a href="https://www.npmjs.com" target="_blank" rel="noreferrer">https://www.npmjs.com</a>) 中获取 Node, npm 和 Yarn。然而，根据你的环境，可能有必要告诉 Volta 从所有不同的源代码下载(例如 npm Enterprise 的内部工具)。为了适应这一点，Volta 提供了连接到下载过程的钩子。</p><h2 id="在哪里配置-hook" tabindex="-1">在哪里配置 hook <a class="header-anchor" href="#在哪里配置-hook" aria-label="Permalink to &quot;在哪里配置 hook&quot;">​</a></h2><p>钩子总是在名为 Hooks.json 的文件中设置。这个文件可以在两个地方之一，这取决于你想要那些钩子的作用域:</p><ul><li>在 Volta 目录中指定的 hook (~/.volta/hooks.json on Linux/MacOS, %LOCALAPPDATA%\Volta\hooks.json on Windows) 将应用于整个系统</li><li>在项目的.volta 子目录中指定的钩子(&lt;PROJECT ROOT&gt;/.volta/hooks.json)将只在该项目中应用。这里的 &lt;PROJECT ROOT&gt; 被定义为 package.json 所在目录。</li></ul><h2 id="hooks-文件格式" tabindex="-1">Hooks 文件格式 <a class="header-anchor" href="#hooks-文件格式" aria-label="Permalink to &quot;Hooks 文件格式&quot;">​</a></h2><p>hooks.json 的内容必须是一个对象，每种类型的工具(当前是 node、npm 和 yarn)都有可选的键。每个工具有 3 个动作，每个动作都可以有一个钩子应用于它们:</p><ul><li><code>index</code> 表示用于确定该工具可下载的版本列表的 URL。访问该 URL 时的响应必须与所选工具的公共索引格式匹配。</li><li><code>latest</code> 表示该工具的最新版本的 URL。对于 node，响应应该采用与索引相同的格式，确保最新版本是列表中的第一个元素。对于 yarn，响应应该是原始版本号字符串，而不是其他。</li><li><code>distro</code> 表示用于下载工具二进制文件的 URL。</li></ul><p>最后，每个动作都有 3 个可以使用的钩子(如下所述)(每次只能为每个动作指定一个)。</p><p>一个 hooks.json 文件例子，如下:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/usr/local/node-lookup&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;latest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;prefix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://example.com/node/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;distro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://example.com/{{os}}/{{arch}}/node-{{version}}.tar.gz&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;npm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;prefix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://example.com/npm/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;latest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;~/npm-latest&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;distro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://example.com/npm/npm-{{version}}.tgz&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;yarn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://example.com/yarn/{{os}}/{{arch}}/yarn-{{version}}.tgz&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;latest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;prefix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://example.com/yarnpkg/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;distro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;~/yarn-distro&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="hook-类型" tabindex="-1">hook 类型 <a class="header-anchor" href="#hook-类型" aria-label="Permalink to &quot;hook 类型&quot;">​</a></h2><h3 id="prefix-钩子" tabindex="-1"><code>prefix</code> 钩子 <a class="header-anchor" href="#prefix-钩子" aria-label="Permalink to &quot;`prefix` 钩子&quot;">​</a></h3><p><code>prefix</code>钩子是一个简单的 URL 替换。URL 将使用指定的前缀，后跟该操作的公共文件名构建。例如，使用上面的 <code>hooks.json</code>。我们有一个 <code>prefix</code> 钩子来确定最新的 yarn 版本。默认情况下，Volta 会通过向 <code>https://yarnpkg.com/latest-version</code> 发起请求来获取最新版本。Volta 会使用钩子访问 <code>http://example.com/yarnpkg/latest-version</code>， 并在 <code>http://example.com/yarnpkg/</code> 的指定前缀后面添加 <code>latest-version</code>。</p><h3 id="template-钩子" tabindex="-1"><code>template</code> 钩子 <a class="header-anchor" href="#template-钩子" aria-label="Permalink to &quot;`template` 钩子&quot;">​</a></h3><p>The <code>template</code> hook allows you to specify the template for a URL, with wildcards that will be replaced. 可用的通配符有:</p><ul><li><code>os</code> 将被&#39;darwin&#39;， &#39;linux&#39;或&#39;win&#39;取代，具体取决于操作系统。</li><li><code>arch</code> 将被&#39;x86&#39;或&#39;x64&#39;取代，具体取决于系统的体系结构。</li><li><code>version</code> (仅在 <code>distro</code> 有效) 将被 Volta 正在尝试下载的特定版本的工具所取代。</li><li><code>filename</code> 将被 Volta 从公共注册表下载的文件的文件名所替换。</li><li><code>ext</code> (仅在 <code>distro</code> 有效) 将被 Volta 期望下载的文件扩展名所替换。</li></ul><div class="warning custom-block"><p class="custom-block-title">提示</p><p><code>filename</code> 和 <code>ext</code> 替换仅在 Volta 0.8.4 或更高版本中可用</p></div><p>使用 <code>node.distro</code> 从上面的例子中，当在 64 位 Linux 系统上获取 <code>node@10.15.3</code>时，Volta 将尝试从<code>http://example.com/linux/x64/node-10.15.3.tar.gz</code> 下载</p><h3 id="bin-hooks" tabindex="-1"><code>bin</code> Hooks <a class="header-anchor" href="#bin-hooks" aria-label="Permalink to &quot;`bin` Hooks&quot;">​</a></h3><p>The <code>bin</code> hook is an all-purpose hook that will call out to an external script to determine the URL. The value is a path to an executable script that will be called, and the URL will be read from the <code>stdout</code> of that script. The <code>stderr</code> of the script will be shown to the user, so it can be used to show progress bars or waiting spinners if desired. If the path to the script is relative then it will be resolved relative to the <code>hooks.json</code> file in which it is specified. In this context, a relative path means that the path begins with <code>./</code> or <code>../</code> on Linux/MacOS and begins with <code>.\</code> or <code>..\</code> on Windows. Lastly, for <code>distro</code> action hooks, the requested version of the tool will be passed as the first argument to that script.</p><p>Using the <code>yarn.distro</code> hook from the example <code>hooks.json</code>, when fetching <code>yarn@1.13.0</code>, Volta will call <code>~/yarn-distro &quot;1.13.0&quot;</code> and attempt to download the tarball from the URL that is returned by that hook.</p></div></div></main><footer class="VPDocFooter" data-v-f58f624c data-v-196315e3><!--[--><!--]--><div class="edit-info" data-v-196315e3><!----><div class="last-updated" data-v-196315e3><p class="VPLastUpdated" data-v-196315e3 data-v-8dcd132f>最后更新时间: <time datetime="2024-11-27T05:21:43.000Z" data-v-8dcd132f></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-196315e3><span class="visually-hidden" id="doc-footer-aria-label" data-v-196315e3>Pager</span><div class="pager" data-v-196315e3><a class="VPLink link pager-link prev" href="/reference/help.html" data-v-196315e3><!--[--><span class="desc" data-v-196315e3>上一篇</span><span class="title" data-v-196315e3>volta help</span><!--]--></a></div><div class="pager" data-v-196315e3><a class="VPLink link pager-link next" href="/reference/advanced/packages.html" data-v-196315e3><!--[--><span class="desc" data-v-196315e3>下一篇</span><span class="title" data-v-196315e3>Packages Binaries</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-16e90887 data-v-a3d856af><div class="container" data-v-a3d856af><p class="message" data-v-a3d856af>此文档为非官方翻译版本 - <div class='vp-doc' style='display:inline-flex;'><a href='https://volta.sh/' target='__blank'>官方网站</a></div></p><p class="copyright" data-v-a3d856af>Copyright © 2023-present GuoJiKun</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"guide_getting-start.md\":\"aNHebvtB\",\"guide_introduction.md\":\"BM4Hwxlj\",\"guide_understanding.md\":\"Djm7bh0x\",\"index.md\":\"Dg-gVRUs\",\"reference_advanced_hooks.md\":\"fEW-ADJz\",\"reference_advanced_installers.md\":\"BFqK-MEQ\",\"reference_advanced_packages.md\":\"Ycd9TWxL\",\"reference_advanced_pnpm.md\":\"CACYvCbH\",\"reference_advanced_uninstall.md\":\"M0CIj0da\",\"reference_advanced_workspaces.md\":\"l2OEvWZA\",\"reference_completions.md\":\"Cxf3exEg\",\"reference_fetch.md\":\"C4E-Hhoa\",\"reference_help.md\":\"Z924tn12\",\"reference_index.md\":\"QzCDodvN\",\"reference_install.md\":\"C5Hy8nHB\",\"reference_list.md\":\"CTnd8ZxA\",\"reference_pin.md\":\"BHm989xC\",\"reference_run.md\":\"DiQJuVhY\",\"reference_setup.md\":\"C_a_ozUc\",\"reference_uninstall.md\":\"Hyq8XKca\",\"reference_which.md\":\"Bj3BjVD5\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"Volta\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"指南\",\"link\":\"/guide/introduction\"},{\"text\":\"参考\",\"link\":\"/reference/index\"},{\"text\":\"官方网站\",\"link\":\"https://volta.sh/\"}],\"sidebar\":{\"/guide/\":[{\"text\":\"介绍\",\"link\":\"/guide/introduction\"},{\"text\":\"快速开始\",\"link\":\"/guide/getting-start\"},{\"text\":\"了解 Volta\",\"link\":\"/guide/understanding\"}],\"/reference/\":[{\"text\":\"参考\",\"items\":[{\"text\":\"volta 命令\",\"link\":\"/reference/index\"},{\"text\":\"volta fetch\",\"link\":\"/reference/fetch\"},{\"text\":\"volta install\",\"link\":\"/reference/install\"},{\"text\":\"volta uninstall\",\"link\":\"/reference/uninstall\"},{\"text\":\"volta pin\",\"link\":\"/reference/pin\"},{\"text\":\"volta list\",\"link\":\"/reference/list\"},{\"text\":\"volta completions\",\"link\":\"/reference/completions\"},{\"text\":\"volta which\",\"link\":\"/reference/which\"},{\"text\":\"volta setup\",\"link\":\"/reference/setup\"},{\"text\":\"volta run\",\"link\":\"/reference/run\"},{\"text\":\"volta help\",\"link\":\"/reference/help\"}]},{\"text\":\"高级的\",\"collapsed\":true,\"items\":[{\"text\":\"Hooks\",\"link\":\"/reference/advanced/hooks\"},{\"text\":\"Packages Binaries\",\"link\":\"/reference/advanced/packages\"},{\"text\":\"安装程序\",\"link\":\"/reference/advanced/installers\"},{\"text\":\"工作区 Workspace\",\"link\":\"/reference/advanced/workspaces\"},{\"text\":\"卸载 Volta\",\"link\":\"/reference/advanced/uninstall\"},{\"text\":\"pnpm 支持\",\"link\":\"/reference/advanced/pnpm\"}]}]},\"lastUpdatedText\":\"最后更新时间\",\"outline\":[2,3],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/document-translate/volta\"}],\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"search\":{\"provider\":\"local\"},\"outlineTitle\":\"章节目录\",\"footer\":{\"message\":\"此文档为非官方翻译版本 - <div class='vp-doc' style='display:inline-flex;'><a href='https://volta.sh/' target='__blank'>官方网站</a></div>\",\"copyright\":\"Copyright © 2023-present GuoJiKun\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>